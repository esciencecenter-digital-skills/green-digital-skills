[{"_path":"/modules/optimizing-energy-use/slides_optimizing_energy_use","_dir":"optimizing-energy-use","_draft":false,"_partial":false,"_locale":"","title":"Optimizing in Practice","description":"===","type":"slides","order":1,"_type":"markdown","_id":"local_fs:modules:optimizing-energy-use:slides_optimizing_energy_use.md","_source":"local_fs","_file":"modules/optimizing-energy-use/slides_optimizing_energy_use.md","_extension":"md","plainText":"---\ntitle: Optimizing in Practice\ntype: slides\norder: 1\n---\n\n<!-- .slide: data-state=\"title\" -->\n\n# Optimizing Energy Use in Practice\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### What we will cover here\n- What software development choices can reduce energy wastage\n- How can we measure the actual energy usage of our code\n\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### Good software practice\n\nClean and maintainable software is essential\nfor sustainable/green software:\n - Ease of use, reduce error during data settings\n - Less bugs, avoid wasteful bugged runs\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### Software life cycle\n\n- Thinking about long term sustainability, documentation.\n- Reusable software is a key component of modern\nsoftware development, reducing the time/energy consuming\ntask of developing every component of complex softwares.\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### What language should I use?\n- Typical conception of energy efficiency:\n  - C++ and Rust at the top\n  - Python and R at the bottom\n- There is a lot of truth in this but there are a lot of important considerations\n- **Many major numerical libraries in Python are not Python \"under the surface\"**\n  - The core is usually C++ or something like that.\n  - e.g. PyTorch, Tensorflow, numpy (and many others)\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### Use the right tool for each task\n\n- Should I avoid \"slow\" and inefficient programming languages?\n- Well, each has its purpose\n  - Python: great for stitching pieces together, easy prototyping\n  - C/C++/Fortran: better at crunching numbers fast\n- Language benchmarks available in the literature can be misleading here\n  - Python/R for can be fine, it's more about the libraries you are using\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### What software should we optimize?\n- **It is important that frequently used tools are as efficient as possible**\n- Your single-use analysis scripts probably don't matter so much - just use the easiest language for the job\n- Optimization is not free and costs development time (and energy) especially in lower level languages like C\n- Generally there are not enough RSEs to do all the coding and optimizations, and researchers don't have time\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### Minimizing energy use\n- Ultimately depends on the resources you use\n- Number of CPU cores is clearly a large contributor\n- Carbon footprint of memory is interesting - it doesn't matter how much you use, but how much is available. Don't request 10 times the memory you need on a server \"just in case\"\n- Think about WHEN we run a job on a server. Energy mix different at different times.\n- Can use tools such as the Carbon Aware Task Scheduler - tells you what is the best time to run in the next 48 hours.\n- Most jobs have some flexibility - we don't care if we run it right now or in a few hours. Especially over the weekend.\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### Time to solution\n\n- Energy is Power * time\n- As a first approximation, more efficient (faster) software will be energy efficient\n  - It is possible to run on many CPUs although there is overhead from the parallelism.\n\nNote:\n\n===\n\n### Profile your code\n\n- We recommend trying `CodeCarbon`\n  - More in this afternoon's hands-on workshop\n- Also PMT (Power Measurement Toolkit), Rjoules, and many more \n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### What if I can't/won't change the code?\n\n- Perhaps you can profile the code but you cannot do much with the results\n  - e.g. You are not the developer, or don't feel experienced enough\n- There are tools such as the Energy Aware Runtime\n  - Dynamically scales the CPU or GPU clock frequency up or down while the code is running\n  - When code is waiting a lot (for I/O or memory), frequency is scaled down\n  - Remember that Power ~ frequency^2\n  - Also covered in this afternoon's hands-on workshop (HPC-track)\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n### A warning: Jevon's Paradox\n\n```\nIn economics, the Jevons paradox occurs when technological progress increases\nthe efficiency with which a resource is used (reducing the amount necessary for any one use),\nbut the falling cost of use induces increases in demand enough that resource use is increased,\nrather than reduced.\n```\n\n- [https://en.wikipedia.org/wiki/Jevons_paradox](https://en.wikipedia.org/wiki/Jevons_paradox)\n\n* Are you thinking about this the right way?\n* Is green computing really a purely technical issue?\n* Is your footprint by computing really your biggest contribution to the climate crisis?\n* What are other low hanging fruits you can tackle?\n\nNote:\nIn practice, reducing energy use overall is more about organizational policy and value judgements about what the expected return is for a given amount of energy used.\n\n===\n\n\n<!-- .slide: data-state=\"keepintouch\" -->\n\n\nwww.esciencecenter.nl\n\ninfo@esciencecenter.nl\n\n020 - 460 47 70\n"},{"_path":"/modules/software-development-handson/exercises_cicd","_dir":"software-development-handson","_draft":false,"_partial":false,"_locale":"","title":"CI/CD optimization","description":"Add here your exercises...","type":"exercise","order":4,"_type":"markdown","_id":"local_fs:modules:software-development-handson:exercises_cicd.md","_source":"local_fs","_file":"modules/software-development-handson/exercises_cicd.md","_extension":"md","plainText":"---\ntitle: CI/CD optimization\ntype: exercise\norder: 4\n---\n\n# Good Practices will save the day!\n\nAdd here your exercises..."}]