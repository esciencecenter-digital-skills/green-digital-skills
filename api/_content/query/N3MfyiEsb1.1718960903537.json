[{"_path":"/modules/optimizing-energy-use/info","_dir":"optimizing-energy-use","_draft":false,"_partial":false,"_locale":"","title":"Learning objectives","description":"","type":"info","order":0,"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"learning-objectives"},"children":[{"type":"text","value":"Learning Objectives"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this module you will learn to answer the following questions:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"How do I measure how much energy I am using?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Does this correspond to the real usage?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Does making my code more time-efficient mean it's greener?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What programming language should I choose?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What are some best practices for green coding?"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"What do I do if I don't develop the code (or for whatever reason can't modify it)?"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"learning-objectives","depth":2,"text":"Learning Objectives"}]}},"_type":"markdown","_id":"local_fs:modules:optimizing-energy-use:info.md","_source":"local_fs","_file":"modules/optimizing-energy-use/info.md","_extension":"md","plainText":"---\ntitle: Learning objectives\ntype: info\norder: 0\n---\n\n## Learning Objectives\n\nIn this module you will learn to answer the following questions:\n\n* How do I measure how much energy I am using?\n* Does this correspond to the real usage?\n* Does making my code more time-efficient mean it's greener? \n* What programming language should I choose?\n* What are some best practices for green coding?\n* What do I do if I don't develop the code (or for whatever reason can't modify it)?\n"},{"_path":"/modules/optimizing-energy-use/slides_optimizing_energy_use","_dir":"optimizing-energy-use","_draft":false,"_partial":false,"_locale":"","title":"Optimizing in Practice","description":"===","type":"slides","order":1,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"optimizing-energy-use-in-practice"},"children":[{"type":"text","value":"Optimizing Energy Use in Practice"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"good-software-practice"},"children":[{"type":"text","value":"Good software practice"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Clean and maintainable software is essential\nto sustainable/green software:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ease of use, reduce error during data settings"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"less bugs, avoid wasteful bugged runs"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"software-life-cycle"},"children":[{"type":"text","value":"Software life cycle"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Thinking about long term sustainability, documentation."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reusable software is a key component of modern\nsoftware development, reducing the time/energy consuming\ntask of developing every component of complex softwares."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"what-language-should-i-use"},"children":[{"type":"text","value":"What language should I use?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Typical conception of energy efficiency:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"C++ and Rust at the top"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Python and R at the bottom"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"There is a lot of truth in this but there are a lot of important considerations"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Many major numerical libraries in Python are not Python \"under the surface\""}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The core is usually C++ or something like that."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"e.g. PyTorch, Tensorflow, numpy (and many others)"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"right-tool-for-each-task"},"children":[{"type":"text","value":"Right tool for each task"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Are there slow programming languages that should be\navoided ?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"each tool has it's purpose.\nPython: great for stitching pieces together, easy prototyping\nC/C++/Fortran: better at crunching number fast, but not\nso good at doing string manipulation, ..."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Benchmark available in the litterature can be missleading."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"-> Use the right tool for each task (could simply be the\ntool you're confortable with), blending languages\nwhen necessary."}]},{"type":"element","tag":"center","props":{},"children":[{"type":"element","tag":"img","props":{"src":"media/fig-dummy.png","width":"55%"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"what-software-should-we-optimize"},"children":[{"type":"text","value":"What software should we optimize?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"It is important that frequently used tools are as efficient as possible"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Your single-use analysis scripts probably don't matter so much - just use the easiest language for the job"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Optimization is not free and costs development time (and energy) especially in lower level languages like C"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Generally there are not enough RSEs to do all the coding and optimizations, and researchers don't have time"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"minimizing-energy-use"},"children":[{"type":"text","value":"Minimizing energy use"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ultimately depends on the resources you use"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Number of CPU cores is clearly a large contributor"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Carbon footprint of memory is interesting - it doesn't matter how much you use, but how much is available. Don't request 10 times the memory you need on a server \"just in case\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Think about WHEN we run a job on a server. Energy mix different at different times."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Can use tools such as the Carbon Aware Task Scheduler - tells you what is the best time to run in the next 48 hours."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Most jobs have some flexibility - we don't care if we run it right now or in a few hours. Especially over the weekend."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"energy-usage"},"children":[{"type":"text","value":"Energy usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Energy is power * time -> as first approximation,\nmore efficient (faster) software will be energy efficient."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A note on parallelism and scaling issue."}]},{"type":"element","tag":"center","props":{},"children":[{"type":"element","tag":"img","props":{"src":"media/fig-dummy.png","width":"55%"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"h2","props":{"id":"how-to-measure"},"children":[{"type":"text","value":"How to measure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"introducing PMT (Python) / RJoules (R) / EAR (language agnostic)."}]},{"type":"element","tag":"center","props":{},"children":[{"type":"element","tag":"img","props":{"src":"media/fig-dummy.png","width":"55%"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://www.esciencecenter.nl","rel":["nofollow"]},"children":[{"type":"text","value":"www.esciencecenter.nl"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"mailto:info@esciencecenter.nl"},"children":[{"type":"text","value":"info@esciencecenter.nl"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"020 - 460 47 70"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"good-software-practice","depth":2,"text":"Good software practice"},{"id":"software-life-cycle","depth":2,"text":"Software life cycle"},{"id":"what-language-should-i-use","depth":2,"text":"What language should I use?"},{"id":"right-tool-for-each-task","depth":2,"text":"Right tool for each task"},{"id":"what-software-should-we-optimize","depth":2,"text":"What software should we optimize?"},{"id":"minimizing-energy-use","depth":2,"text":"Minimizing energy use"},{"id":"energy-usage","depth":2,"text":"Energy usage"},{"id":"how-to-measure","depth":2,"text":"How to measure"}]}},"_type":"markdown","_id":"local_fs:modules:optimizing-energy-use:slides_optimizing_energy_use.md","_source":"local_fs","_file":"modules/optimizing-energy-use/slides_optimizing_energy_use.md","_extension":"md","plainText":"---\ntitle: Optimizing in Practice\ntype: slides\norder: 1\n---\n\n<!-- .slide: data-state=\"title\" -->\n\n# Optimizing Energy Use in Practice\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n## Good software practice\n\nClean and maintainable software is essential\nto sustainable/green software:\n - ease of use, reduce error during data settings\n - less bugs, avoid wasteful bugged runs\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n## Software life cycle\n\n- Thinking about long term sustainability, documentation.\n- Reusable software is a key component of modern\nsoftware development, reducing the time/energy consuming\ntask of developing every component of complex softwares.\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n## What language should I use?\n- Typical conception of energy efficiency:\n  - C++ and Rust at the top\n  - Python and R at the bottom\n- There is a lot of truth in this but there are a lot of important considerations\n- **Many major numerical libraries in Python are not Python \"under the surface\"**\n  - The core is usually C++ or something like that.\n  - e.g. PyTorch, Tensorflow, numpy (and many others)\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n## Right tool for each task\n\nAre there slow programming languages that should be\navoided ?\n - each tool has it's purpose.\nPython: great for stitching pieces together, easy prototyping\nC/C++/Fortran: better at crunching number fast, but not\nso good at doing string manipulation, ...\n\nBenchmark available in the litterature can be missleading.\n\n-> Use the right tool for each task (could simply be the \ntool you're confortable with), blending languages\nwhen necessary.\n\n<center>\n<img src=\"media/fig-dummy.png\" width=\"55%\">\n</center>\n\nNote:\n\n===\n\n\n<!-- .slide: data-state=\"standard\" -->\n\n## What software should we optimize?\n- **It is important that frequently used tools are as efficient as possible**\n- Your single-use analysis scripts probably don't matter so much - just use the easiest language for the job\n- Optimization is not free and costs development time (and energy) especially in lower level languages like C\n- Generally there are not enough RSEs to do all the coding and optimizations, and researchers don't have time\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n## Minimizing energy use\n- Ultimately depends on the resources you use\n- Number of CPU cores is clearly a large contributor\n- Carbon footprint of memory is interesting - it doesn't matter how much you use, but how much is available. Don't request 10 times the memory you need on a server \"just in case\"\n- Think about WHEN we run a job on a server. Energy mix different at different times.\n- Can use tools such as the Carbon Aware Task Scheduler - tells you what is the best time to run in the next 48 hours.\n- Most jobs have some flexibility - we don't care if we run it right now or in a few hours. Especially over the weekend.\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"standard\" -->\n\n## Energy usage\n\nEnergy is power * time -> as first approximation,\nmore efficient (faster) software will be energy efficient.\n\nA note on parallelism and scaling issue.\n\n<center>\n<img src=\"media/fig-dummy.png\" width=\"55%\">\n</center>\n\nNote:\n\n===\n\n## How to measure\n\nintroducing PMT (Python) / RJoules (R) / EAR (language agnostic).\n\n\n<center>\n<img src=\"media/fig-dummy.png\" width=\"55%\">\n</center>\n\nNote:\n\n===\n\n<!-- .slide: data-state=\"keepintouch\" -->\n\n\nwww.esciencecenter.nl\n\ninfo@esciencecenter.nl\n\n020 - 460 47 70\n"},{"_path":"/modules/optimizing-energy-use/exercises","_dir":"optimizing-energy-use","_draft":false,"_partial":false,"_locale":"","title":"Exercises","description":"Add here your exercises...","type":"exercise","order":3,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"exercises"},"children":[{"type":"text","value":"Exercises"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add here your exercises..."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"local_fs:modules:optimizing-energy-use:exercises.md","_source":"local_fs","_file":"modules/optimizing-energy-use/exercises.md","_extension":"md","plainText":"---\ntitle: Exercises\ntype: exercise\norder: 3\n---\n\n# Exercises\n\nAdd here your exercises...\n"},{"_path":"/modules/optimizing-energy-use/useful_links","_dir":"optimizing-energy-use","_draft":false,"_partial":false,"_locale":"","title":"Useful Links","description":"","type":"reading","order":4,"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"reading-material"},"children":[{"type":"text","value":"Reading material"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.sciencedirect.com/science/article/abs/pii/S0167642321000022","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.sciencedirect.com/science/article/abs/pii/S0167642321000022"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://link.springer.com/content/pdf/10.1186/1471-2105-9-82.pdf","rel":["nofollow"]},"children":[{"type":"text","value":"https://link.springer.com/content/pdf/10.1186/1471-2105-9-82.pdf"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=876288&casa_token=t3_vJU1MZzoAAAAA:XFmC7USWBN185EN6njXKePUjsByVwm-VWrYvnrYQrFzDE5hdJOereEfSu3y4zS3BBoFdUF_5cPY&tag=1","rel":["nofollow"]},"children":[{"type":"text","value":"https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=876288&casa_token=t3_vJU1MZzoAAAAA:XFmC7USWBN185EN6njXKePUjsByVwm-VWrYvnrYQrFzDE5hdJOereEfSu3y4zS3BBoFdUF_5cPY&tag=1"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"reading-material","depth":2,"text":"Reading material"}]}},"_type":"markdown","_id":"local_fs:modules:optimizing-energy-use:useful_links.md","_source":"local_fs","_file":"modules/optimizing-energy-use/useful_links.md","_extension":"md","plainText":"---\ntitle: Useful Links\ntype: reading\norder: 4\n---\n\n## Reading material\n* <https://www.sciencedirect.com/science/article/abs/pii/S0167642321000022>\n* <https://link.springer.com/content/pdf/10.1186/1471-2105-9-82.pdf>\n* <https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=876288&casa_token=t3_vJU1MZzoAAAAA:XFmC7USWBN185EN6njXKePUjsByVwm-VWrYvnrYQrFzDE5hdJOereEfSu3y4zS3BBoFdUF_5cPY&tag=1>\n"}]