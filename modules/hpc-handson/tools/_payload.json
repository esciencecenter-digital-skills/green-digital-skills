[{"data":1,"prerenderedAt":404},["ShallowReactive",2],{"content-query-s73rIeRAv0":3,"content-query-AT44bg6JPw":235},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"type":10,"order":11,"body":12,"_type":228,"_id":229,"_source":230,"_file":231,"_stem":232,"_extension":233,"plainText":234},"/modules/hpc-handson/tools","hpc-handson",false,"","EAR Tools","EAR is available on Snellius as a module","reading",5,{"type":13,"children":14,"toc":221},"root",[15,23,28,38,45,50,55,60,68,73,81,86,94,99,107,114,158,164,172,180,186,191,212],{"type":16,"tag":17,"props":18,"children":20},"element","h1",{"id":19},"ear-tools",[21],{"type":22,"value":8},"text",{"type":16,"tag":24,"props":25,"children":26},"p",{},[27],{"type":22,"value":9},{"type":16,"tag":29,"props":30,"children":32},"pre",{"code":31},"module load 2022\nmodule load ear\n",[33],{"type":16,"tag":34,"props":35,"children":36},"code",{"__ignoreMap":7},[37],{"type":22,"value":31},{"type":16,"tag":39,"props":40,"children":42},"h3",{"id":41},"job-accounting-eacct",[43],{"type":22,"value":44},"Job accounting (eacct)",{"type":16,"tag":24,"props":46,"children":47},{},[48],{"type":22,"value":49},"The eacct command shows accounting information stored in the EAR DB for jobs (and step) IDs. The command uses EAR’s configuration file to determine if the user running it is privileged or not, as non-privileged users can only access their information. It provides the following options. The ear module needs to be loaded to use the eacct command.",{"type":16,"tag":24,"props":51,"children":52},{},[53],{"type":22,"value":54},"eacct example usage\nThe basic usage of eacct retrieves the last 20 applications (by default) of the user executing it. The default behavior shows data from each job-step, aggregating the values from each node in said job-step. If using SLURM as a job manager, a sbatch job-step is created with the data from the entire execution. A specific job may be specified with -j option:",{"type":16,"tag":24,"props":56,"children":57},{},[58],{"type":22,"value":59},"Default: Show the last 20 jobs (maximum) executed by the user.",{"type":16,"tag":29,"props":61,"children":63},{"code":62},"eacct\n",[64],{"type":16,"tag":34,"props":65,"children":66},{"__ignoreMap":7},[67],{"type":22,"value":62},{"type":16,"tag":24,"props":69,"children":70},{},[71],{"type":22,"value":72},"Query a specific job",{"type":16,"tag":29,"props":74,"children":76},{"code":75},"eacct -J 123456789\n",[77],{"type":16,"tag":34,"props":78,"children":79},{"__ignoreMap":7},[80],{"type":22,"value":75},{"type":16,"tag":24,"props":82,"children":83},{},[84],{"type":22,"value":85},"Query a specific job-step",{"type":16,"tag":29,"props":87,"children":89},{"code":88},"eacct -J 123456789.0\n",[90],{"type":16,"tag":34,"props":91,"children":92},{"__ignoreMap":7},[93],{"type":22,"value":88},{"type":16,"tag":24,"props":95,"children":96},{},[97],{"type":22,"value":98},"Show metrics (averaged per job.stepid) from 3 jobs",{"type":16,"tag":29,"props":100,"children":102},{"code":101},"eacct -j 175966,175967,175968\n",[103],{"type":16,"tag":34,"props":104,"children":105},{"__ignoreMap":7},[106],{"type":22,"value":101},{"type":16,"tag":108,"props":109,"children":111},"h4",{"id":110},"important-options",[112],{"type":22,"value":113},"Important Options",{"type":16,"tag":115,"props":116,"children":117},"ul",{},[118,130,141],{"type":16,"tag":119,"props":120,"children":121},"li",{},[122,128],{"type":16,"tag":34,"props":123,"children":125},{"className":124},[],[126],{"type":22,"value":127},"-l",{"type":22,"value":129}," shows the information for each node for each job instead of the global statistics for said job.",{"type":16,"tag":119,"props":131,"children":132},{},[133,139],{"type":16,"tag":34,"props":134,"children":136},{"className":135},[],[137],{"type":22,"value":138},"-r",{"type":22,"value":140}," shows the EAR loop signatures. Users, job ids, and step ids can be specified as if were showing job information.",{"type":16,"tag":119,"props":142,"children":143},{},[144,150,152],{"type":16,"tag":34,"props":145,"children":147},{"className":146},[],[148],{"type":22,"value":149},"-c",{"type":22,"value":151}," specifies the file where the output will be stored in CSV format. If the argument is \"no_file\" the output will be printed to STDOUT ",{"type":16,"tag":153,"props":154,"children":155},"span",{},[156],{"type":22,"value":157},"default: off",{"type":16,"tag":39,"props":159,"children":161},{"id":160},"example",[162],{"type":22,"value":163},"Example:",{"type":16,"tag":29,"props":165,"children":167},{"code":166},"squeue\n             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n           2884239      rome ear_sbat benjamic  R       2:19      1 tcn352\n",[168],{"type":16,"tag":34,"props":169,"children":170},{"__ignoreMap":7},[171],{"type":22,"value":166},{"type":16,"tag":29,"props":173,"children":175},{"code":174},"[benjamic@int4 EAR]$ eacct -j 2884239\n    JOB-STEP USER       APPLICATION      POLICY NODES AVG/DEF/IMC(GHz) TIME(s)    POWER(W) GBS     CPI   ENERGY(J)    GFLOPS/W IO(MBs) MPI%  G-POW (T/U)   G-FREQ  G-UTIL(G/MEM)\n2884239-sb   benjamic   ear_sbatch_GROMA MO     1     2.57/2.60/---    386.00     596.51   ---     ---   230253       ---      ---     ---   ---           ---     ---          \n2884239-0    benjamic   ear_sbatch_GROMA MO     1     2.57/2.60/1.47   348.64     617.18   8.33    0.33  215175       0.2930   0.3     77.6  0.00/---      ---     --- \n",[176],{"type":16,"tag":34,"props":177,"children":178},{"__ignoreMap":7},[179],{"type":22,"value":174},{"type":16,"tag":39,"props":181,"children":183},{"id":182},"application-characterization",[184],{"type":22,"value":185},"Application Characterization",{"type":16,"tag":24,"props":187,"children":188},{},[189],{"type":22,"value":190},"EAR is not only a tool that will throttle CPU Freqs, but it also allows you to collect \"traces\" of your application, and characterize it. This is especially handy for large many node jobs, that often prove difficult to profile. In this way EAR is also a \"light-weight\" profiler for large applications.",{"type":16,"tag":24,"props":192,"children":193},{},[194,196,202,204,210],{"type":22,"value":195},"The image below illustrates the usage of EAR to show the characteristics of a variety of multi-node CPU based applications side by side. This information can be obtained via the ",{"type":16,"tag":34,"props":197,"children":199},{"className":198},[],[200],{"type":22,"value":201},"monitoring",{"type":22,"value":203}," policy in EAR, and visualized with the ",{"type":16,"tag":34,"props":205,"children":207},{"className":206},[],[208],{"type":22,"value":209},"eacct",{"type":22,"value":211}," tool.",{"type":16,"tag":24,"props":213,"children":214},{},[215],{"type":16,"tag":216,"props":217,"children":220},"img",{"alt":218,"src":219},"Application_char","/modules/hpc-handson/media/CPU_characterization_plot.png",[],{"title":7,"searchDepth":222,"depth":222,"links":223},2,[224,226,227],{"id":41,"depth":225,"text":44},3,{"id":160,"depth":225,"text":163},{"id":182,"depth":225,"text":185},"markdown","local_fs:modules:hpc-handson:tools.md","local_fs","modules/hpc-handson/tools.md","modules/hpc-handson/tools","md","---\ntitle: EAR Tools\ntype: reading\norder: 5\n---\n\n\n# EAR Tools\n\nEAR is available on Snellius as a module\n```\nmodule load 2022\nmodule load ear\n```\n### Job accounting (eacct)\nThe eacct command shows accounting information stored in the EAR DB for jobs (and step) IDs. The command uses EAR’s configuration file to determine if the user running it is privileged or not, as non-privileged users can only access their information. It provides the following options. The ear module needs to be loaded to use the eacct command.\n\neacct example usage\nThe basic usage of eacct retrieves the last 20 applications (by default) of the user executing it. The default behavior shows data from each job-step, aggregating the values from each node in said job-step. If using SLURM as a job manager, a sbatch job-step is created with the data from the entire execution. A specific job may be specified with -j option:\n\nDefault: Show the last 20 jobs (maximum) executed by the user.\n```\neacct\n```\nQuery a specific job\n```\neacct -J 123456789\n```\nQuery a specific job-step\n```\neacct -J 123456789.0\n```\nShow metrics (averaged per job.stepid) from 3 jobs\n```\neacct -j 175966,175967,175968\n```\n\n#### Important Options\n - `-l` shows the information for each node for each job instead of the global statistics for said job.\n - `-r` shows the EAR loop signatures. Users, job ids, and step ids can be specified as if were showing job information.\n - `-c` specifies the file where the output will be stored in CSV format. If the argument is \"no_file\" the output will be printed to STDOUT [default: off]\n\n\n### Example:\n\n```\nsqueue\n             JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n           2884239      rome ear_sbat benjamic  R       2:19      1 tcn352\n```\n\n```\n[benjamic@int4 EAR]$ eacct -j 2884239\n    JOB-STEP USER       APPLICATION      POLICY NODES AVG/DEF/IMC(GHz) TIME(s)    POWER(W) GBS     CPI   ENERGY(J)    GFLOPS/W IO(MBs) MPI%  G-POW (T/U)   G-FREQ  G-UTIL(G/MEM)\n2884239-sb   benjamic   ear_sbatch_GROMA MO     1     2.57/2.60/---    386.00     596.51   ---     ---   230253       ---      ---     ---   ---           ---     ---          \n2884239-0    benjamic   ear_sbatch_GROMA MO     1     2.57/2.60/1.47   348.64     617.18   8.33    0.33  215175       0.2930   0.3     77.6  0.00/---      ---     --- \n```\n\n### Application Characterization\n\nEAR is not only a tool that will throttle CPU Freqs, but it also allows you to collect \"traces\" of your application, and characterize it. This is especially handy for large many node jobs, that often prove difficult to profile. In this way EAR is also a \"light-weight\" profiler for large applications.\n\nThe image below illustrates the usage of EAR to show the characteristics of a variety of multi-node CPU based applications side by side. This information can be obtained via the `monitoring` policy in EAR, and visualized with the `eacct` tool.\n\n![Application_char](media/CPU_characterization_plot.png)\n",[236,299,322],{"_path":237,"_dir":238,"_draft":6,"_partial":6,"_locale":7,"title":239,"description":7,"body":240,"_type":228,"_id":295,"_source":230,"_file":296,"_stem":297,"_extension":233,"plainText":298},"/main/about","main","About",{"type":13,"children":241,"toc":291},[242,249,254,259,280,286],{"type":16,"tag":243,"props":244,"children":246},"h2",{"id":245},"about-the-green-digital-skills-course",[247],{"type":22,"value":248},"About the Green Digital Skills course",{"type":16,"tag":24,"props":250,"children":251},{},[252],{"type":22,"value":253},"In this course, we want to equip the attendees with\na basic knowledge of the link from digital and computational science to energy consumption, and\neventually equivalent CO2 emissions.",{"type":16,"tag":24,"props":255,"children":256},{},[257],{"type":22,"value":258},"The course material consists of two parts:",{"type":16,"tag":115,"props":260,"children":261},{},[262,275],{"type":16,"tag":119,"props":263,"children":264},{},[265,267,273],{"type":22,"value":266},"a lecture, in three chapters, introducing the general topic of ",{"type":16,"tag":34,"props":268,"children":270},{"className":269},[],[271],{"type":22,"value":272},"green",{"type":22,"value":274}," computing",{"type":16,"tag":119,"props":276,"children":277},{},[278],{"type":22,"value":279},"a set of hands-on exercises, covering general good practices for software development, and tools for measuring energy and CO2 emissions on your laptop or on HPC clusters",{"type":16,"tag":243,"props":281,"children":283},{"id":282},"target-audience",[284],{"type":22,"value":285},"Target audience",{"type":16,"tag":24,"props":287,"children":288},{},[289],{"type":22,"value":290},"The target audience for this course includes, but is not limited to, students, reseachers,\ndata scientists, and IT support staff performing computational science, handling data, or\nusing/developing scientific software.",{"title":7,"searchDepth":222,"depth":222,"links":292},[293,294],{"id":245,"depth":222,"text":248},{"id":282,"depth":222,"text":285},"local_fs:main:about.md","main/about.md","main/about","---\ntitle: About\n---\n\n## About the Green Digital Skills course\n\nIn this course, we want to equip the attendees with\na basic knowledge of the link from digital and computational science to energy consumption, and\neventually equivalent CO2 emissions.\n\nThe course material consists of two parts: \n - a lecture, in three chapters, introducing the general topic of `green` computing\n - a set of hands-on exercises, covering general good practices for software development, and tools for measuring energy and CO2 emissions on your laptop or on HPC clusters \n\n\n## Target audience\n\nThe target audience for this course includes, but is not limited to, students, reseachers,\ndata scientists, and IT support staff performing computational science, handling data, or\nusing/developing scientific software.\n",{"_path":300,"_dir":238,"_draft":6,"_partial":6,"_locale":7,"title":301,"description":7,"body":302,"_type":228,"_id":318,"_source":230,"_file":319,"_stem":320,"_extension":233,"plainText":321},"/main/contribute","Contribute",{"type":13,"children":303,"toc":315},[304,310],{"type":16,"tag":243,"props":305,"children":307},{"id":306},"contributing-to-this-lesson",[308],{"type":22,"value":309},"Contributing to this lesson",{"type":16,"tag":24,"props":311,"children":312},{},[313],{"type":22,"value":314},"Add contributing guidelines for you project.",{"title":7,"searchDepth":222,"depth":222,"links":316},[317],{"id":306,"depth":222,"text":309},"local_fs:main:contribute.md","main/contribute.md","main/contribute","---\ntitle: Contribute\n---\n\n## Contributing to this lesson\n\nAdd contributing guidelines for you project.",{"_path":323,"_dir":238,"_draft":6,"_partial":6,"_locale":7,"title":324,"description":7,"order":325,"body":326,"_type":228,"_id":400,"_source":230,"_file":401,"_stem":402,"_extension":233,"plainText":403},"/main/workshops","Workshops",4,{"type":13,"children":327,"toc":397},[328,334],{"type":16,"tag":243,"props":329,"children":331},{"id":330},"past-workshops",[332],{"type":22,"value":333},"Past workshops",{"type":16,"tag":335,"props":336,"children":337},"table",{},[338,369],{"type":16,"tag":339,"props":340,"children":341},"thead",{},[342],{"type":16,"tag":343,"props":344,"children":345},"tr",{},[346,353,359,364],{"type":16,"tag":347,"props":348,"children":350},"th",{"align":349},"right",[351],{"type":22,"value":352},"Date",{"type":16,"tag":347,"props":354,"children":356},{"align":355},"left",[357],{"type":22,"value":358},"Organisation",{"type":16,"tag":347,"props":360,"children":361},{"align":355},[362],{"type":22,"value":363},"Location",{"type":16,"tag":347,"props":365,"children":366},{"align":355},[367],{"type":22,"value":368},"Comments",{"type":16,"tag":370,"props":371,"children":372},"tbody",{},[373],{"type":16,"tag":343,"props":374,"children":375},{},[376,382,387,392],{"type":16,"tag":377,"props":378,"children":379},"td",{"align":349},[380],{"type":22,"value":381},"2024-11-21",{"type":16,"tag":377,"props":383,"children":384},{"align":355},[385],{"type":22,"value":386},"Netherlands eScience Center, SURF",{"type":16,"tag":377,"props":388,"children":389},{"align":355},[390],{"type":22,"value":391},"Prinses Máxima Centrum voor Kinderoncologie, The Netherlands",{"type":16,"tag":377,"props":393,"children":394},{"align":355},[395],{"type":22,"value":396},"Pilot workshop",{"title":7,"searchDepth":222,"depth":222,"links":398},[399],{"id":330,"depth":222,"text":333},"local_fs:main:workshops.md","main/workshops.md","main/workshops","---\ntitle: Workshops\norder: 4\n---\n\n## Past workshops\n\n| Date               | Organisation                 | Location                              | Comments                    |\n|-------------------:|:-----------------------------|:--------------------------------------|:----------------------------|\n| 2024-11-21         | Netherlands eScience Center, SURF  | Prinses Máxima Centrum voor Kinderoncologie, The Netherlands | Pilot workshop          |\n",1737635331901]