[{"data":1,"prerenderedAt":617},["ShallowReactive",2],{"content-query-rjnmBlzztt":3,"content-query-AT44bg6JPw":558},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"type":10,"order":11,"body":12,"_type":552,"_id":553,"_source":554,"_file":555,"_extension":556,"plainText":557},"/modules/optimizing-energy-use/slides_optimizing_energy_use","optimizing-energy-use",false,"","Optimizing in Practice","===","slides",1,{"type":13,"children":14,"toc":537},"root",[15,24,29,36,51,55,61,66,79,84,88,94,107,111,115,121,169,173,177,183,222,226,230,236,262,266,270,276,309,313,317,323,344,348,352,358,386,390,394,400,444,448,452,458,467,481,504,509,513,523,532],{"type":16,"tag":17,"props":18,"children":20},"element","h1",{"id":19},"optimizing-energy-use-in-practice",[21],{"type":22,"value":23},"text","Optimizing Energy Use in Practice",{"type":16,"tag":25,"props":26,"children":27},"p",{},[28],{"type":22,"value":9},{"type":16,"tag":30,"props":31,"children":33},"h3",{"id":32},"what-we-will-cover-here",[34],{"type":22,"value":35},"What we will cover here",{"type":16,"tag":37,"props":38,"children":39},"ul",{},[40,46],{"type":16,"tag":41,"props":42,"children":43},"li",{},[44],{"type":22,"value":45},"What software development choices can reduce energy wastage",{"type":16,"tag":41,"props":47,"children":48},{},[49],{"type":22,"value":50},"How can we measure the actual energy usage of our code",{"type":16,"tag":25,"props":52,"children":53},{},[54],{"type":22,"value":9},{"type":16,"tag":30,"props":56,"children":58},{"id":57},"good-software-practice",[59],{"type":22,"value":60},"Good software practice",{"type":16,"tag":25,"props":62,"children":63},{},[64],{"type":22,"value":65},"Clean and maintainable software is essential\nfor sustainable/green software:",{"type":16,"tag":37,"props":67,"children":68},{},[69,74],{"type":16,"tag":41,"props":70,"children":71},{},[72],{"type":22,"value":73},"Ease of use, reduce error during data settings",{"type":16,"tag":41,"props":75,"children":76},{},[77],{"type":22,"value":78},"Less bugs, avoid wasteful bugged runs",{"type":16,"tag":25,"props":80,"children":81},{},[82],{"type":22,"value":83},"Note:",{"type":16,"tag":25,"props":85,"children":86},{},[87],{"type":22,"value":9},{"type":16,"tag":30,"props":89,"children":91},{"id":90},"software-life-cycle",[92],{"type":22,"value":93},"Software life cycle",{"type":16,"tag":37,"props":95,"children":96},{},[97,102],{"type":16,"tag":41,"props":98,"children":99},{},[100],{"type":22,"value":101},"Thinking about long term sustainability, documentation.",{"type":16,"tag":41,"props":103,"children":104},{},[105],{"type":22,"value":106},"Reusable software is a key component of modern\nsoftware development, reducing the time/energy consuming\ntask of developing every component of complex softwares.",{"type":16,"tag":25,"props":108,"children":109},{},[110],{"type":22,"value":83},{"type":16,"tag":25,"props":112,"children":113},{},[114],{"type":22,"value":9},{"type":16,"tag":30,"props":116,"children":118},{"id":117},"what-language-should-i-use",[119],{"type":22,"value":120},"What language should I use?",{"type":16,"tag":37,"props":122,"children":123},{},[124,142,147],{"type":16,"tag":41,"props":125,"children":126},{},[127,129],{"type":22,"value":128},"Typical conception of energy efficiency:\n",{"type":16,"tag":37,"props":130,"children":131},{},[132,137],{"type":16,"tag":41,"props":133,"children":134},{},[135],{"type":22,"value":136},"C++ and Rust at the top",{"type":16,"tag":41,"props":138,"children":139},{},[140],{"type":22,"value":141},"Python and R at the bottom",{"type":16,"tag":41,"props":143,"children":144},{},[145],{"type":22,"value":146},"There is a lot of truth in this but there are a lot of important considerations",{"type":16,"tag":41,"props":148,"children":149},{},[150,156],{"type":16,"tag":151,"props":152,"children":153},"strong",{},[154],{"type":22,"value":155},"Many major numerical libraries in Python are not Python \"under the surface\"",{"type":16,"tag":37,"props":157,"children":158},{},[159,164],{"type":16,"tag":41,"props":160,"children":161},{},[162],{"type":22,"value":163},"The core is usually C++ or something like that.",{"type":16,"tag":41,"props":165,"children":166},{},[167],{"type":22,"value":168},"e.g. PyTorch, Tensorflow, numpy (and many others)",{"type":16,"tag":25,"props":170,"children":171},{},[172],{"type":22,"value":83},{"type":16,"tag":25,"props":174,"children":175},{},[176],{"type":22,"value":9},{"type":16,"tag":30,"props":178,"children":180},{"id":179},"use-the-right-tool-for-each-task",[181],{"type":22,"value":182},"Use the right tool for each task",{"type":16,"tag":37,"props":184,"children":185},{},[186,191,209],{"type":16,"tag":41,"props":187,"children":188},{},[189],{"type":22,"value":190},"Should I avoid \"slow\" and inefficient programming languages?",{"type":16,"tag":41,"props":192,"children":193},{},[194,196],{"type":22,"value":195},"Well, each has its purpose\n",{"type":16,"tag":37,"props":197,"children":198},{},[199,204],{"type":16,"tag":41,"props":200,"children":201},{},[202],{"type":22,"value":203},"Python: great for stitching pieces together, easy prototyping",{"type":16,"tag":41,"props":205,"children":206},{},[207],{"type":22,"value":208},"C/C++/Fortran: better at crunching numbers fast",{"type":16,"tag":41,"props":210,"children":211},{},[212,214],{"type":22,"value":213},"Language benchmarks available in the literature can be misleading here\n",{"type":16,"tag":37,"props":215,"children":216},{},[217],{"type":16,"tag":41,"props":218,"children":219},{},[220],{"type":22,"value":221},"Python/R for can be fine, it's more about the libraries you are using",{"type":16,"tag":25,"props":223,"children":224},{},[225],{"type":22,"value":83},{"type":16,"tag":25,"props":227,"children":228},{},[229],{"type":22,"value":9},{"type":16,"tag":30,"props":231,"children":233},{"id":232},"what-software-should-we-optimize",[234],{"type":22,"value":235},"What software should we optimize?",{"type":16,"tag":37,"props":237,"children":238},{},[239,247,252,257],{"type":16,"tag":41,"props":240,"children":241},{},[242],{"type":16,"tag":151,"props":243,"children":244},{},[245],{"type":22,"value":246},"It is important that frequently used tools are as efficient as possible",{"type":16,"tag":41,"props":248,"children":249},{},[250],{"type":22,"value":251},"Your single-use analysis scripts probably don't matter so much - just use the easiest language for the job",{"type":16,"tag":41,"props":253,"children":254},{},[255],{"type":22,"value":256},"Optimization is not free and costs development time (and energy) especially in lower level languages like C",{"type":16,"tag":41,"props":258,"children":259},{},[260],{"type":22,"value":261},"Generally there are not enough RSEs to do all the coding and optimizations, and researchers don't have time",{"type":16,"tag":25,"props":263,"children":264},{},[265],{"type":22,"value":83},{"type":16,"tag":25,"props":267,"children":268},{},[269],{"type":22,"value":9},{"type":16,"tag":30,"props":271,"children":273},{"id":272},"minimizing-energy-use",[274],{"type":22,"value":275},"Minimizing energy use",{"type":16,"tag":37,"props":277,"children":278},{},[279,284,289,294,299,304],{"type":16,"tag":41,"props":280,"children":281},{},[282],{"type":22,"value":283},"Ultimately depends on the resources you use",{"type":16,"tag":41,"props":285,"children":286},{},[287],{"type":22,"value":288},"Number of CPU cores is clearly a large contributor",{"type":16,"tag":41,"props":290,"children":291},{},[292],{"type":22,"value":293},"Carbon footprint of memory is interesting - it doesn't matter how much you use, but how much is available. Don't request 10 times the memory you need on a server \"just in case\"",{"type":16,"tag":41,"props":295,"children":296},{},[297],{"type":22,"value":298},"Think about WHEN we run a job on a server. Energy mix different at different times.",{"type":16,"tag":41,"props":300,"children":301},{},[302],{"type":22,"value":303},"Can use tools such as the Carbon Aware Task Scheduler - tells you what is the best time to run in the next 48 hours.",{"type":16,"tag":41,"props":305,"children":306},{},[307],{"type":22,"value":308},"Most jobs have some flexibility - we don't care if we run it right now or in a few hours. Especially over the weekend.",{"type":16,"tag":25,"props":310,"children":311},{},[312],{"type":22,"value":83},{"type":16,"tag":25,"props":314,"children":315},{},[316],{"type":22,"value":9},{"type":16,"tag":30,"props":318,"children":320},{"id":319},"time-to-solution",[321],{"type":22,"value":322},"Time to solution",{"type":16,"tag":37,"props":324,"children":325},{},[326,331],{"type":16,"tag":41,"props":327,"children":328},{},[329],{"type":22,"value":330},"Energy is Power * time",{"type":16,"tag":41,"props":332,"children":333},{},[334,336],{"type":22,"value":335},"As a first approximation, more efficient (faster) software will be energy efficient\n",{"type":16,"tag":37,"props":337,"children":338},{},[339],{"type":16,"tag":41,"props":340,"children":341},{},[342],{"type":22,"value":343},"It is possible to run on many CPUs although there is overhead from the parallelism.",{"type":16,"tag":25,"props":345,"children":346},{},[347],{"type":22,"value":83},{"type":16,"tag":25,"props":349,"children":350},{},[351],{"type":22,"value":9},{"type":16,"tag":30,"props":353,"children":355},{"id":354},"profile-your-code",[356],{"type":22,"value":357},"Profile your code",{"type":16,"tag":37,"props":359,"children":360},{},[361,381],{"type":16,"tag":41,"props":362,"children":363},{},[364,366,373],{"type":22,"value":365},"We recommend trying ",{"type":16,"tag":367,"props":368,"children":370},"code",{"className":369},[],[371],{"type":22,"value":372},"CodeCarbon",{"type":16,"tag":37,"props":374,"children":375},{},[376],{"type":16,"tag":41,"props":377,"children":378},{},[379],{"type":22,"value":380},"More in this afternoon's hands-on workshop",{"type":16,"tag":41,"props":382,"children":383},{},[384],{"type":22,"value":385},"Also PMT (Power Measurement Toolkit), Rjoules, and many more",{"type":16,"tag":25,"props":387,"children":388},{},[389],{"type":22,"value":83},{"type":16,"tag":25,"props":391,"children":392},{},[393],{"type":22,"value":9},{"type":16,"tag":30,"props":395,"children":397},{"id":396},"what-if-i-cantwont-change-the-code",[398],{"type":22,"value":399},"What if I can't/won't change the code?",{"type":16,"tag":37,"props":401,"children":402},{},[403,416],{"type":16,"tag":41,"props":404,"children":405},{},[406,408],{"type":22,"value":407},"Perhaps you can profile the code but you cannot do much with the results\n",{"type":16,"tag":37,"props":409,"children":410},{},[411],{"type":16,"tag":41,"props":412,"children":413},{},[414],{"type":22,"value":415},"e.g. You are not the developer, or don't feel experienced enough",{"type":16,"tag":41,"props":417,"children":418},{},[419,421],{"type":22,"value":420},"There are tools such as the Energy Aware Runtime\n",{"type":16,"tag":37,"props":422,"children":423},{},[424,429,434,439],{"type":16,"tag":41,"props":425,"children":426},{},[427],{"type":22,"value":428},"Dynamically scales the CPU or GPU clock frequency up or down while the code is running",{"type":16,"tag":41,"props":430,"children":431},{},[432],{"type":22,"value":433},"When code is waiting a lot (for I/O or memory), frequency is scaled down",{"type":16,"tag":41,"props":435,"children":436},{},[437],{"type":22,"value":438},"Remember that Power ~ frequency^2",{"type":16,"tag":41,"props":440,"children":441},{},[442],{"type":22,"value":443},"Also covered in this afternoon's hands-on workshop (HPC-track)",{"type":16,"tag":25,"props":445,"children":446},{},[447],{"type":22,"value":83},{"type":16,"tag":25,"props":449,"children":450},{},[451],{"type":22,"value":9},{"type":16,"tag":30,"props":453,"children":455},{"id":454},"a-warning-jevons-paradox",[456],{"type":22,"value":457},"A warning: Jevon's Paradox",{"type":16,"tag":459,"props":460,"children":462},"pre",{"code":461},"In economics, the Jevons paradox occurs when technological progress increases\nthe efficiency with which a resource is used (reducing the amount necessary for any one use),\nbut the falling cost of use induces increases in demand enough that resource use is increased,\nrather than reduced.\n",[463],{"type":16,"tag":367,"props":464,"children":465},{"__ignoreMap":7},[466],{"type":22,"value":461},{"type":16,"tag":37,"props":468,"children":469},{},[470],{"type":16,"tag":41,"props":471,"children":472},{},[473],{"type":16,"tag":474,"props":475,"children":479},"a",{"href":476,"rel":477},"https://en.wikipedia.org/wiki/Jevons_paradox",[478],"nofollow",[480],{"type":22,"value":476},{"type":16,"tag":37,"props":482,"children":483},{},[484,489,494,499],{"type":16,"tag":41,"props":485,"children":486},{},[487],{"type":22,"value":488},"Are you thinking about this the right way?",{"type":16,"tag":41,"props":490,"children":491},{},[492],{"type":22,"value":493},"Is green computing really a purely technical issue?",{"type":16,"tag":41,"props":495,"children":496},{},[497],{"type":22,"value":498},"Is your footprint by computing really your biggest contribution to the climate crisis?",{"type":16,"tag":41,"props":500,"children":501},{},[502],{"type":22,"value":503},"What are other low hanging fruits you can tackle?",{"type":16,"tag":25,"props":505,"children":506},{},[507],{"type":22,"value":508},"Note:\nIn practice, reducing energy use overall is more about organizational policy and value judgements about what the expected return is for a given amount of energy used.",{"type":16,"tag":25,"props":510,"children":511},{},[512],{"type":22,"value":9},{"type":16,"tag":25,"props":514,"children":515},{},[516],{"type":16,"tag":474,"props":517,"children":520},{"href":518,"rel":519},"http://www.esciencecenter.nl",[478],[521],{"type":22,"value":522},"www.esciencecenter.nl",{"type":16,"tag":25,"props":524,"children":525},{},[526],{"type":16,"tag":474,"props":527,"children":529},{"href":528},"mailto:info@esciencecenter.nl",[530],{"type":22,"value":531},"info@esciencecenter.nl",{"type":16,"tag":25,"props":533,"children":534},{},[535],{"type":22,"value":536},"020 - 460 47 70",{"title":7,"searchDepth":538,"depth":538,"links":539},2,[540,542,543,544,545,546,547,548,549,550,551],{"id":32,"depth":541,"text":35},3,{"id":57,"depth":541,"text":60},{"id":90,"depth":541,"text":93},{"id":117,"depth":541,"text":120},{"id":179,"depth":541,"text":182},{"id":232,"depth":541,"text":235},{"id":272,"depth":541,"text":275},{"id":319,"depth":541,"text":322},{"id":354,"depth":541,"text":357},{"id":396,"depth":541,"text":399},{"id":454,"depth":541,"text":457},"markdown","local_fs:modules:optimizing-energy-use:slides_optimizing_energy_use.md","local_fs","modules/optimizing-energy-use/slides_optimizing_energy_use.md","md","---\ntitle: Optimizing in Practice\ntype: slides\norder: 1\n---\n\n\u003C!-- .slide: data-state=\"title\" -->\n\n# Optimizing Energy Use in Practice\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### What we will cover here\n- What software development choices can reduce energy wastage\n- How can we measure the actual energy usage of our code\n\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### Good software practice\n\nClean and maintainable software is essential\nfor sustainable/green software:\n - Ease of use, reduce error during data settings\n - Less bugs, avoid wasteful bugged runs\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### Software life cycle\n\n- Thinking about long term sustainability, documentation.\n- Reusable software is a key component of modern\nsoftware development, reducing the time/energy consuming\ntask of developing every component of complex softwares.\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### What language should I use?\n- Typical conception of energy efficiency:\n  - C++ and Rust at the top\n  - Python and R at the bottom\n- There is a lot of truth in this but there are a lot of important considerations\n- **Many major numerical libraries in Python are not Python \"under the surface\"**\n  - The core is usually C++ or something like that.\n  - e.g. PyTorch, Tensorflow, numpy (and many others)\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### Use the right tool for each task\n\n- Should I avoid \"slow\" and inefficient programming languages?\n- Well, each has its purpose\n  - Python: great for stitching pieces together, easy prototyping\n  - C/C++/Fortran: better at crunching numbers fast\n- Language benchmarks available in the literature can be misleading here\n  - Python/R for can be fine, it's more about the libraries you are using\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### What software should we optimize?\n- **It is important that frequently used tools are as efficient as possible**\n- Your single-use analysis scripts probably don't matter so much - just use the easiest language for the job\n- Optimization is not free and costs development time (and energy) especially in lower level languages like C\n- Generally there are not enough RSEs to do all the coding and optimizations, and researchers don't have time\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### Minimizing energy use\n- Ultimately depends on the resources you use\n- Number of CPU cores is clearly a large contributor\n- Carbon footprint of memory is interesting - it doesn't matter how much you use, but how much is available. Don't request 10 times the memory you need on a server \"just in case\"\n- Think about WHEN we run a job on a server. Energy mix different at different times.\n- Can use tools such as the Carbon Aware Task Scheduler - tells you what is the best time to run in the next 48 hours.\n- Most jobs have some flexibility - we don't care if we run it right now or in a few hours. Especially over the weekend.\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### Time to solution\n\n- Energy is Power * time\n- As a first approximation, more efficient (faster) software will be energy efficient\n  - It is possible to run on many CPUs although there is overhead from the parallelism.\n\nNote:\n\n===\n\n### Profile your code\n\n- We recommend trying `CodeCarbon`\n  - More in this afternoon's hands-on workshop\n- Also PMT (Power Measurement Toolkit), Rjoules, and many more \n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### What if I can't/won't change the code?\n\n- Perhaps you can profile the code but you cannot do much with the results\n  - e.g. You are not the developer, or don't feel experienced enough\n- There are tools such as the Energy Aware Runtime\n  - Dynamically scales the CPU or GPU clock frequency up or down while the code is running\n  - When code is waiting a lot (for I/O or memory), frequency is scaled down\n  - Remember that Power ~ frequency^2\n  - Also covered in this afternoon's hands-on workshop (HPC-track)\n\nNote:\n\n===\n\n\u003C!-- .slide: data-state=\"standard\" -->\n\n### A warning: Jevon's Paradox\n\n```\nIn economics, the Jevons paradox occurs when technological progress increases\nthe efficiency with which a resource is used (reducing the amount necessary for any one use),\nbut the falling cost of use induces increases in demand enough that resource use is increased,\nrather than reduced.\n```\n\n- [https://en.wikipedia.org/wiki/Jevons_paradox](https://en.wikipedia.org/wiki/Jevons_paradox)\n\n* Are you thinking about this the right way?\n* Is green computing really a purely technical issue?\n* Is your footprint by computing really your biggest contribution to the climate crisis?\n* What are other low hanging fruits you can tackle?\n\nNote:\nIn practice, reducing energy use overall is more about organizational policy and value judgements about what the expected return is for a given amount of energy used.\n\n===\n\n\n\u003C!-- .slide: data-state=\"keepintouch\" -->\n\n\nwww.esciencecenter.nl\n\ninfo@esciencecenter.nl\n\n020 - 460 47 70\n",[559,595],{"_path":560,"_dir":561,"_draft":6,"_partial":6,"_locale":7,"title":562,"description":7,"body":563,"_type":552,"_id":592,"_source":554,"_file":593,"_extension":556,"plainText":594},"/main/about","main","About",{"type":13,"children":564,"toc":588},[565,572,577,583],{"type":16,"tag":566,"props":567,"children":569},"h2",{"id":568},"about-this-lessonproject",[570],{"type":22,"value":571},"About this lesson/project",{"type":16,"tag":25,"props":573,"children":574},{},[575],{"type":22,"value":576},"Provide details about the project and lesson.",{"type":16,"tag":566,"props":578,"children":580},{"id":579},"target-audience",[581],{"type":22,"value":582},"Target audience",{"type":16,"tag":25,"props":584,"children":585},{},[586],{"type":22,"value":587},"Define target audience for this material.",{"title":7,"searchDepth":538,"depth":538,"links":589},[590,591],{"id":568,"depth":538,"text":571},{"id":579,"depth":538,"text":582},"local_fs:main:about.md","main/about.md","---\ntitle: About\n---\n\n## About this lesson/project\n\nProvide details about the project and lesson.\n\n## Target audience\n\nDefine target audience for this material.",{"_path":596,"_dir":561,"_draft":6,"_partial":6,"_locale":7,"title":597,"description":7,"body":598,"_type":552,"_id":614,"_source":554,"_file":615,"_extension":556,"plainText":616},"/main/contribute","Contribute",{"type":13,"children":599,"toc":611},[600,606],{"type":16,"tag":566,"props":601,"children":603},{"id":602},"contributing-to-this-lesson",[604],{"type":22,"value":605},"Contributing to this lesson",{"type":16,"tag":25,"props":607,"children":608},{},[609],{"type":22,"value":610},"Add contributing guidelines for you project.",{"title":7,"searchDepth":538,"depth":538,"links":612},[613],{"id":602,"depth":538,"text":605},"local_fs:main:contribute.md","main/contribute.md","---\ntitle: Contribute\n---\n\n## Contributing to this lesson\n\nAdd contributing guidelines for you project.",1730929737963]